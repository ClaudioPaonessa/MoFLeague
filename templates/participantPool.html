<h1 class="mt-4">Shared Card Pool</h1>

<hr>

<div ng-include src="'partials/errormessage.html'"></div>

<div class="row">
    <div class="col-xl-12">
        <a class="btn btn-special mb-4" href="#!tournament/{{tournamentId}}"><i class="fas fa-arrow-left"></i> Back to Tournament Overview</a>
    </div>
</div>

<div class="row" ng-hide="loadingPool">
    <div class="col-xl-12">
        <div class="card card-special mb-4">
            <div class="card-header bg-2 text-center">
                Pool
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-xl-12">
                        <div ng-repeat="(key, cards) in enrichedPool | groupBy: 'cardType'">
                            <h3 class="mt-4">{{key}} ({{cards.length}})</h3>

                            <div class="d-flex align-content-start flex-wrap">
                                <button ng-repeat="card in cards | orderBy:['colorIdentity', '-rarityNumeric']" style="white-space: normal;" type="button" class="btn btn-primary p-3 m-2 pool-card" uib-popover-template="'cardPopover.html'" 
                                popover-placement="bottom" popover-trigger="'mouseenter'" class="badge badge-primary" ng-class="'color-identity-' + card.colorIdentity">
                                    {{card.name}}
                                    <i class="fas fa-square" ng-class="card.rarity"></i>
                                    <span class="badge badge-light">{{card.numberOfCards}}x</span>
                                    <br>
                                    <span class="small">({{card.typeLine}})</span>
                                    <img class="ml-1" width="18px" src="img/{{m}}.png" ng-repeat="m in card.mana track by $index">
                                    <span class="badge badge-primary badge-pill"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/ng-template" id="cardPopover.html">
    <div class="popover-content">
        <img ng-src="{{card.imageUri}}" width="250px" class="img-responsive">
    </div>
</script>
