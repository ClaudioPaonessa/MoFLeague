<h1 class="mt-4">History</h1>
<h3 class="mt-2" style="color: #b1b1b1">Matches</h3>

<hr>

<div ng-include src="'partials/errormessage.html'"></div>

<div class="row">
    <div class="col-xl-6">
        <div ng-repeat="(key, value) in matches | groupBy: 'tournamentName'">
            <h1 class="mt-4 display-4">{{key}}</h1>

            <div class="list-group list-group-flush">
                <div class="list-group-item item-special flex-column align-items-start" ng-repeat="row in value">
                    <div class="d-flex w-100 justify-content-between">
                      <h5 class="mb-1">{{row.p1DisplayName}} vs. {{row.p2DisplayName}}</h5>
                      <small>
                        <span class="badge bg-primary text-light">{{row.player1GamesWon}} : {{row.player2GamesWon}}</span>
                      </small>
                    </div>
                    <p class="mb-1 small">
                        {{row.p1DisplayName}} receives:

                        <span ng-repeat="card in row.tradedToP1 track by $index">
                            <a uib-popover-template="'tplTradeToP1.html'" popover-placement="bottom" popover-trigger="'mouseenter'" class="badge badge-primary" ng-class="row.tradedToP1Rarities[$index]">
                                {{card}}
                            </a>
                        </span>

                        <span ng-show="row.tradedToP1.length == 0">
                            -
                        </span>
                    </p>
                    <p class="mb-1 small">
                        {{row.p2DisplayName}} receives: 

                        <span ng-repeat="card in row.tradedToP2 track by $index">
                            <a uib-popover-template="'tplTradeToP2.html'" popover-placement="bottom" popover-trigger="'mouseenter'" class="badge badge-primary" ng-class="row.tradedToP2Rarities[$index]">
                                {{card}}
                            </a>
                        </span>

                        <span ng-show="row.tradedToP2.length == 0">
                            -
                        </span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/ng-template" id="tplTradeToP1.html">
    <div class="popover-content">
        <img ng-src="{{row.tradedToP1Images[$index]}}" width="200px" class="img-responsive">
    </div>
</script>

<script type="text/ng-template" id="tplTradeToP2.html">
    <div class="popover-content">
        <img ng-src="{{row.tradedToP2Images[$index]}}" width="200px" class="img-responsive">
    </div>
</script>